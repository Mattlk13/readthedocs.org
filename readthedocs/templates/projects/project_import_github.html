{% extends "projects/project_import_from_service.html" %}
{% load i18n %}


{% block title %}{% trans "Import a GitHub project" %}{% endblock %}

{% block content-header %}<h1>{% trans "Import a GitHub project" %}</h1>{% endblock %}

{% block content %}
  {% if github_connected %}

    {% block top_content %}
      {% url 'api_sync_github_repositories' as sync_url %}
      <button data-bind="click: function() { sync_projects('{{ sync_url }}') }">
        {% trans "Sync your GitHub organizations and projects" %}
      </button>
    {% endblock top_content %}

    <ul class="notifications">
      <li class="notification notification-20"
          data-bind="visible: is_syncing",
          style="display: none;">
        {% blocktrans %}Syncing ...{% endblocktrans %}
      </li>

      <li class="notification notification-40"
          data-bind="show: error, text: error">
      </li>
    </ul>

    {% block main_content %}
      <div class="col-major">

        <p>
          <a href="#" data-bind="visible: page_previous, click: previous_page">
            Previous
          </a>
          <a href="#" data-bind="visible: page_next, click: next_page">
            Next
          </a>
        </p>

        <div class="module repository-list">
          <div class="module-wrapper">
            <div class="module-list">
              <div class="module-list-wrapper">

                <ul data-bind="foreach: projects">
                  <li class="module-item">

                    <span data-bind="with: owner">
                      <img data-bind="attr: {src: avatar_url}" height=24 />
                    </span>

                    <a data-bind="attr: {href: url}, text: name"></a>

                    <ul class="module-item-menu">
                      <button style="margin: 0px;">
                        {% trans "Create" %}
                      </button>
                    </ul>

                  </li>
                </ul>

              </div>
            </div>
          </div>
        </div>

        <p>
          <a href="#" data-bind="visible: page_previous, click: previous_page">
            Previous
          </a>
          <a href="#" data-bind="visible: page_next, click: next_page">
            Next
          </a>
        </p>

      </div>
    {% endblock main_content %}

    {% block sidebar_content %}
      <div class="col-minor">
        <ul data-bind="foreach: organizations">
          <li>
            <img data-bind="attr: {src: avatar_url}" height=32 />
            <a href="#" data-bind="text: display_name, click: function () { $root.filter_org(id()); }"></a>
          </li>
        </ul>
      </div>
    {% endblock %}

  {% else %}

    {% block empty %}
      {% url 'socialaccount_connections' as social_url %}
      {% blocktrans %}
        You don't have any GitHub repositories connected.
        Go to your <a href="{{ social_url }}">Social Accounts</a> to set one up.
      {% endblocktrans %}
    {% endblock empty %}

  {% endif %}
{% endblock %}
